# üöÄ –û—Ç—á–µ—Ç –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Supabase ‚Äî SmartAktau

## ‚úÖ –ß—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- ‚úÖ `.gitignore` ‚Äî –∏—Å–∫–ª—é—á–∞–µ—Ç `config.js` –∏ `secret_service_role.txt`
- ‚úÖ `config.example.js` ‚Äî –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- ‚úÖ `config.js` ‚Äî **–ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ (**–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!**)
- ‚úÖ `secret_service_role.txt` ‚Äî service_role –∫–ª—é—á (**–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!**)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π:**
- **anon key** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (`js/api.js`, `js/admin.js`)
- **service_role key** ‚Äî –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–º –∫–æ–¥–µ, —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

### 2. –§–∞–π–ª—ã –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

#### `js/api.js` ‚Äî Supabase API –º–æ–¥—É–ª—å

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
API.initSupabase()

// –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (JPEG, PNG, WebP, –º–∞–∫—Å. 10MB)
API.validateImageFile(file)

// –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ –≤ Storage bucket 'uploads'
await API.uploadPhoto(file, complaintPublicId)
// –ü—É—Ç—å: uploads/{publicId}/{timestamp}_{filename}
// –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: –ø—É–±–ª–∏—á–Ω—ã–π URL

// –°–æ–∑–¥–∞–Ω–∏–µ –∂–∞–ª–æ–±—ã (—Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–æ—Ç–æ)
await API.createComplaint(payload, file)
// –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç: public_id (—Ñ–æ—Ä–º–∞—Ç: ACT-{timestamp})
// –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ –µ—Å–ª–∏ –µ—Å—Ç—å
// –í—Å—Ç–∞–≤–ª—è–µ—Ç –≤ —Ç–∞–±–ª–∏—Ü—É complaints
// Fallback –Ω–∞ localStorage –ø—Ä–∏ –æ—à–∏–±–∫–µ

// –ü–æ–ª—É—á–µ–Ω–∏–µ –∂–∞–ª–æ–±
await API.getComplaints()
// –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ Supabase
// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å localStorage
// Fallback –Ω–∞ localStorage –ø—Ä–∏ –æ—à–∏–±–∫–µ

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
await API.updateStatus(id, newStatus)
// –û–±–Ω–æ–≤–ª—è–µ—Ç –≤ Supabase
// –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å localStorage

// –£–¥–∞–ª–µ–Ω–∏–µ
await API.deleteComplaint(id)
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ù–∞–¥–µ–∂–Ω—ã–π fallback –Ω–∞ `localStorage` –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Supabase
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ (—Ç–∏–ø, —Ä–∞–∑–º–µ—Ä)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è `public_id`
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É Supabase –∏ localStorage
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

#### `admin.html` + `js/admin.js` ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

**–§—É–Ω–∫—Ü–∏–∏:**
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ –ø–∞—Ä–æ–ª—é (`admin123`)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤—Å–µ–≥–æ, –Ω–æ–≤—ã–µ, –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ, –≤—ã–ø–æ–ª–Ω–µ–Ω–æ)
- ‚úÖ –¢–∞–±–ª–∏—Ü–∞ –≤—Å–µ—Ö –∂–∞–ª–æ–±
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —á–µ—Ä–µ–∑ dropdown
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ (–∫–ª–∏–∫ ‚Üí –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞)
- ‚úÖ –î–µ—Ç–∞–ª–∏ –∂–∞–ª–æ–±—ã

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `anon` –∫–ª—é—á (–¥–ª—è —Ö–∞–∫–∞—Ç–æ–Ω–∞ –¥–æ–ø—É—Å—Ç–∏–º–æ)
- üîí –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase Auth

### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### `schema.sql` ‚Äî SQL —Å—Ö–µ–º–∞

**–¢–∞–±–ª–∏—Ü–∞ `complaints`:**
```sql
CREATE TABLE complaints (
  id BIGINT PRIMARY KEY,
  public_id TEXT UNIQUE,
  title TEXT NOT NULL,
  description TEXT NOT NULL,
  category TEXT NOT NULL,
  status TEXT DEFAULT '–ü–æ–ª—É—á–µ–Ω–æ',
  lat DOUBLE PRECISION NOT NULL,
  lon DOUBLE PRECISION NOT NULL,
  address TEXT DEFAULT '–ê–∫—Ç–∞—É',
  photo_urls TEXT[],
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);
```

**–ò–Ω–¥–µ–∫—Å—ã:**
- `created_at DESC` ‚Äî –±—ã—Å—Ç—Ä–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- `category` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- `status` ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `public_id` ‚Äî –ø–æ–∏—Å–∫ –ø–æ ID

**–¢—Ä–∏–≥–≥–µ—Ä:**
- Auto-update `updated_at` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
- ‚úÖ SELECT ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø
- ‚úÖ INSERT ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç –∂–∞–ª–æ–±—ã)
- ‚úÖ UPDATE ‚Äî –ø—É–±–ª–∏—á–Ω—ã–π (–¥–ª—è –¥–µ–º–æ; –≤ –ø—Ä–æ–¥–µ ‚Äî auth only)
- ‚úÖ DELETE ‚Äî —Ç–æ–ª—å–∫–æ service_role

### 4. Storage

#### `storage-setup.md` ‚Äî –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏

**Bucket `uploads`:**
- **–ü—É–±–ª–∏—á–Ω—ã–π** (–¥–ª—è –¥–µ–º–æ)
- **–ú–∞–∫—Å. —Ä–∞–∑–º–µ—Ä:** 10 MB
- **–§–æ—Ä–º–∞—Ç—ã:** JPEG, PNG, WebP

**–ü–æ–ª–∏—Ç–∏–∫–∏:**
```sql
-- –ó–∞–≥—Ä—É–∑–∫–∞
CREATE POLICY "Allow public uploads"
ON storage.objects FOR INSERT
TO public WITH CHECK (bucket_id = 'uploads');

-- –ü—Ä–æ—Å–º–æ—Ç—Ä
CREATE POLICY "Allow public downloads"
ON storage.objects FOR SELECT
TO public USING (bucket_id = 'uploads');
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
uploads/
  ‚îú‚îÄ‚îÄ ACT-1731234567890/
  ‚îÇ   ‚îú‚îÄ‚îÄ 1731234567890_photo1.jpg
  ‚îÇ   ‚îî‚îÄ‚îÄ 1731234567891_photo2.png
```

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**`index.html`:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Supabase JS client (CDN)
- ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –∫–∞–∫ ES6 –º–æ–¥—É–ª–∏ (`type="module"`)

**`js/app.js`:**
- ‚úÖ Async/await –¥–ª—è Supabase –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Supabase –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∞–π–ª–∞ (–Ω–µ base64) –≤ API
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –ø–æ–ª–µ–π (old/new)

**`js/map.js`:**
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `lat/lon` –∏ `latitude/longitude`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ `created_at` –∏ `createdAt`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤

### 6. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**`README.md`:**
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Supabase
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- ‚úÖ –†–∞–∑–¥–µ–ª –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é
- ‚úÖ Security checklist –ø–æ—Å–ª–µ —Ö–∞–∫–∞—Ç–æ–Ω–∞

**`storage-setup.md`:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ bucket
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–∏—Ç–∏–∫
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

## üìã –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤

### ‚úÖ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
.gitignore                  # Git –∏—Å–∫–ª—é—á–µ–Ω–∏—è
config.example.js           # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–ö–û–ú–ú–ò–¢–ò–¢–¨)
config.js                   # –†–µ–∞–ª—å–Ω—ã–µ –∫–ª—é—á–∏ (–ù–ï –ö–û–ú–ú–ò–¢–ò–¢–¨)
secret_service_role.txt     # service_role –∫–ª—é—á (–ù–ï –ö–û–ú–ú–ò–¢–ò–¢–¨)
schema.sql                  # SQL —Å—Ö–µ–º–∞ –¥–ª—è Supabase
storage-setup.md            # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Storage
admin.html                  # –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
js/admin.js                 # –õ–æ–≥–∏–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
DEPLOYMENT.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

### ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
```
index.html                  # –î–æ–±–∞–≤–ª–µ–Ω Supabase client
js/api.js                   # –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å Supabase
js/app.js                   # Async/await + Supabase init
js/map.js                   # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
README.md                   # –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîê –ß—Ç–æ –ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å

**–í–ê–ñ–ù–û:** –≠—Ç–∏ —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏ **–ù–ò–ö–û–ì–î–ê** –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–ø–∞—Å—Ç—å –≤ git:

```
‚ùå config.js
‚ùå secret_service_role.txt
‚ùå .env
‚ùå .env.local
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —ç—Ç–∏ —Ñ–∞–π–ª—ã –≤ .gitignore
cat .gitignore

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω–∏ –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç—Å—è
git status

# –ï—Å–ª–∏ —Å–ª—É—á–∞–π–Ω–æ –¥–æ–±–∞–≤–∏–ª–∏:
git rm --cached config.js secret_service_role.txt
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ:

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   python3 -m http.server 8000
   ```

2. **–û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   ```
   http://localhost:8000
   ```

3. **–¢–µ—Å—Ç–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:**
   - ‚úÖ –°–æ–∑–¥–∞—Ç—å –∂–∞–ª–æ–±—É –±–µ–∑ —Ñ–æ—Ç–æ
   - ‚úÖ –°–æ–∑–¥–∞—Ç—å –∂–∞–ª–æ–±—É —Å —Ñ–æ—Ç–æ (< 10MB, JPEG/PNG/WebP)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –ª–µ–Ω—Ç–µ
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∞—Ä–∫–µ—Ä –Ω–∞ –∫–∞—Ä—Ç–µ
   - ‚úÖ –û—Ç–∫—Ä—ã—Ç—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (`admin.html`)
   - ‚úÖ –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∂–∞–ª–æ–±—ã

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Supabase:**
   ```sql
   SELECT * FROM complaints ORDER BY created_at DESC LIMIT 10;
   ```

5. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Storage:**
   - Storage ‚Üí uploads ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–ø–∫–∏ ACT-*

## üì§ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Supabase (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ):

```sql
-- –í SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç—å schema.sql
-- –°–æ–∑–¥–∞—Ç—å bucket 'uploads' (—Å–º. storage-setup.md)
```

### 2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ config.js —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏
python3 -m http.server 8000
open http://localhost:8000
```

### 3. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é:

#### –í–∞—Ä–∏–∞–Ω—Ç A: Vercel/Netlify (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –î–æ–±–∞–≤–∏—Ç—å env variables –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞:
   ```
   SUPABASE_URL=https://lckrknilkijulyemqolj.supabase.co
   SUPABASE_KEY=eyJhbGc...
   ```

2. –°–æ–∑–¥–∞—Ç—å build script –¥–ª—è –∏–Ω—ä–µ–∫—Ü–∏–∏ –∫–ª—é—á–µ–π:
   ```javascript
   // build.js
   const fs = require('fs');
   const config = `
   export const SUPABASE_URL = '${process.env.SUPABASE_URL}'
   export const SUPABASE_KEY = '${process.env.SUPABASE_KEY}'
   `;
   fs.writeFileSync('config.js', config);
   ```

3. –î–µ–ø–ª–æ–π:
   ```bash
   vercel deploy
   # –∏–ª–∏
   netlify deploy
   ```

#### –í–∞—Ä–∏–∞–Ω—Ç B: GitHub Pages

‚ö†Ô∏è **–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è** ‚Äî –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å env variables

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π backend –¥–ª—è –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è Supabase –∑–∞–ø—Ä–æ—Å–æ–≤

### 4. –ü–æ—Å–ª–µ —Ö–∞–∫–∞—Ç–æ–Ω–∞ (Security):

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤—ã–ø–æ–ª–Ω–∏—Ç—å:**

1. ‚úÖ –†–æ—Ç–∏—Ä–æ–≤–∞—Ç—å `service_role` –∫–ª—é—á:
   - Supabase Dashboard ‚Üí Settings ‚Üí API ‚Üí Reset service_role key

2. ‚úÖ –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
   - –ò–ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ Supabase Auth

3. ‚úÖ –°–¥–µ–ª–∞—Ç—å bucket –ø—Ä–∏–≤–∞—Ç–Ω—ã–º:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å signed URLs –≤–º–µ—Å—Ç–æ –ø—É–±–ª–∏—á–Ω—ã—Ö

4. ‚úÖ –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å RLS –ø–æ–ª–∏—Ç–∏–∫–∏:
   ```sql
   -- UPDATE —Ç–æ–ª—å–∫–æ –¥–ª—è authenticated
   CREATE POLICY "Auth only updates"
   ON complaints FOR UPDATE
   USING (auth.role() = 'authenticated');
   ```

5. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å rate limiting –≤ Supabase

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase:**

- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∂–∞–ª–æ–± —Å —Ñ–æ—Ç–æ ‚Üí Supabase
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∂–∞–ª–æ–± –∏–∑ Supabase
- ‚úÖ –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞–º–∏
- ‚úÖ Fallback –Ω–∞ localStorage
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

**–õ–æ–∫–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç-—Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω:**
```
http://localhost:8000 ‚Äî –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
http://localhost:8000/admin.html ‚Äî –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
```

---

**–ì–æ—Ç–æ–≤–æ –∫ –¥–µ–º–æ!** üöÄ

–í—Å–µ –∫–ª—é—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ –∑–∞—â–∏—â–µ–Ω—ã, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è.
